<html>
    {% load static %}
    <head>
        <script src="https://c0f4f41c-2f55-4863-921b-sdk-docs.github.io/cdn/metamask-sdk.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/web3@1.3.6/dist/web3.min.js"></script>
        <script src="{% static 'index1.js' %}"></script>

    </head>
    <body>
        {{web3method}}
        <!-- Your template HTML -->
<button id="sendDataButton">Send Data</button>

<script>
    
    document.getElementById('sendDataButton').addEventListener('click', function() {
        // Your JSON data
        var web3method = "{{web3method}}";
        var form = document.createElement('form');
        form.method = 'post';
        form.action = "{% url 'doc-about' %}".replace("/about/", "{{redirect}}");    
        console.log(form.action)
        // Submit the form
        "{% if content %}"
            var promise = methobj[web3method](web3method, "{{content}}")
        "{%else%}"
            var promise = methobj[web3method](web3method)
        "{%endif%}"
        
         promise.then(value => {
            console.log('Resolved value:', value);
            var jsonDataInput = document.createElement('input');
            jsonDataInput.type = 'hidden';
            jsonDataInput.name = 'data';
            jsonDataInput.value =  JSON.stringify(value);
            form.appendChild(jsonDataInput);
            var csrfTokenInput = document.createElement('input');
            csrfTokenInput.type = 'hidden';
            csrfTokenInput.name = 'csrfmiddlewaretoken';
            csrfTokenInput.value = '{{ csrf_token }}';
            form.appendChild(csrfTokenInput);
            document.body.appendChild(form);
            form.submit();
            
            // Continue with form submission or other actions
        });
    });
    </script>




    
    </body>
</html>